<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HushMCP Mailer - Email Campaign Management</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-shield-alt"></i>
                        <span>HushMCP Mailer</span>
                    </div>
                    <nav class="nav">
                        <a href="#dashboard" class="nav-link active" data-tab="dashboard">
                            <i class="fas fa-chart-line"></i> Dashboard
                        </a>
                        <a href="#campaigns" class="nav-link" data-tab="campaigns">
                            <i class="fas fa-envelope-bulk"></i> Campaigns
                        </a>
                        <a href="#agents" class="nav-link" data-tab="agents">
                            <i class="fas fa-robot"></i> Agents
                        </a>
                        <a href="#consent" class="nav-link" data-tab="consent">
                            <i class="fas fa-key"></i> Consent
                        </a>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <div class="page-header">
                        <h1><i class="fas fa-chart-line"></i> Dashboard</h1>
                        <p>Overview of your email campaign performance and agent status</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-campaigns">0</h3>
                                <p>Total Campaigns</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-paper-plane"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="emails-sent">0</h3>
                                <p>Emails Sent</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="active-agents">0</h3>
                                <p>Active Agents</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="success-rate">0%</h3>
                                <p>Success Rate</p>
                            </div>
                        </div>
                    </div>

                    <div class="recent-activity">
                        <h2>Recent Activity</h2>
                        <div class="activity-list" id="activity-list">
                            <div class="activity-item">
                                <i class="fas fa-info-circle"></i>
                                <span>Welcome to HushMCP Mailer! Start by creating your first campaign.</span>
                                <small>Just now</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Campaigns Tab -->
                <div id="campaigns" class="tab-content">
                    <div class="page-header">
                        <h1><i class="fas fa-envelope-bulk"></i> Email Campaigns</h1>
                        <button id="new-campaign-btn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> New Campaign
                        </button>
                    </div>

                    <!-- Campaign Creation Form -->
                    <div id="campaign-form" class="form-container" style="display: none;">
                        <div class="form-card">
                            <h2>Create New Email Campaign</h2>
                            <form id="campaign-create-form">
                                <div class="form-group">
                                    <label for="campaign-description">Campaign Description</label>
                                    <textarea id="campaign-description" class="form-control" rows="4" 
                                              placeholder="Describe your email campaign... AI will help generate content based on this description."></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="sender-email">Sender Email</label>
                                    <input type="email" id="sender-email" class="form-control" 
                                           placeholder="your-email@domain.com">
                                </div>

                                <div class="form-group">
                                    <label for="recipient-emails">Recipient Emails</label>
                                    <textarea id="recipient-emails" class="form-control" rows="3" 
                                              placeholder="Enter emails separated by commas or line breaks"></textarea>
                                    <small class="form-help">Or upload a CSV file with email addresses</small>
                                    <input type="file" id="email-file-upload" accept=".csv,.xlsx" class="form-control">
                                </div>

                                <div class="form-group">
                                    <label for="campaign-mode">Execution Mode</label>
                                    <select id="campaign-mode" class="form-control">
                                        <option value="interactive">Interactive (with approval)</option>
                                        <option value="demo">Demo Mode</option>
                                        <option value="headless">Headless (auto-send)</option>
                                    </select>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-magic"></i> Generate Campaign
                                    </button>
                                    <button type="button" id="cancel-campaign" class="btn btn-secondary">
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Campaign List -->
                    <div id="campaigns-list" class="campaigns-container">
                        <div class="empty-state">
                            <i class="fas fa-envelope-open"></i>
                            <h3>No campaigns yet</h3>
                            <p>Create your first email campaign to get started</p>
                        </div>
                    </div>

                    <!-- Campaign Approval Modal -->
                    <div id="approval-modal" class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Campaign Approval Required</h2>
                                <span class="close">&times;</span>
                            </div>
                            <div class="modal-body">
                                <div id="email-preview">
                                    <!-- Email preview will be inserted here -->
                                </div>
                                <div class="approval-actions">
                                    <button id="approve-campaign" class="btn btn-success">
                                        <i class="fas fa-check"></i> Approve & Send
                                    </button>
                                    <button id="modify-campaign" class="btn btn-warning">
                                        <i class="fas fa-edit"></i> Request Changes
                                    </button>
                                    <button id="reject-campaign" class="btn btn-danger">
                                        <i class="fas fa-times"></i> Reject
                                    </button>
                                </div>
                                <div id="feedback-section" style="display: none;">
                                    <label for="modification-feedback">Modification Feedback:</label>
                                    <textarea id="modification-feedback" class="form-control" rows="3"
                                              placeholder="Describe what changes you'd like to make..."></textarea>
                                    <button id="submit-feedback" class="btn btn-primary">Submit Feedback</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Agents Tab -->
                <div id="agents" class="tab-content">
                    <div class="page-header">
                        <h1><i class="fas fa-robot"></i> AI Agents</h1>
                        <button id="refresh-agents" class="btn btn-secondary">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>

                    <div id="agents-grid" class="agents-grid">
                        <!-- Agents will be loaded here -->
                    </div>
                </div>

                <!-- Consent Tab -->
                <div id="consent" class="tab-content">
                    <div class="page-header">
                        <h1><i class="fas fa-key"></i> Consent Management</h1>
                        <p>Manage your consent tokens for secure agent operations</p>
                    </div>

                    <div class="consent-section">
                        <div class="form-card">
                            <h2>Generate Consent Token</h2>
                            <form id="consent-token-form">
                                <div class="form-group">
                                    <label for="user-id">User ID</label>
                                    <input type="text" id="user-id" class="form-control" 
                                           placeholder="your-user-id" value="demo_user">
                                </div>

                                <div class="form-group">
                                    <label for="agent-select">Target Agent</label>
                                    <select id="agent-select" class="form-control">
                                        <option value="agent_mailerpanda">MailerPanda Agent</option>
                                        <option value="agent_addtocalendar">AddToCalendar Agent</option>
                                        <option value="agent_chandufinance">ChanduFinance Agent</option>
                                        <option value="agent_relationship_memory">Relationship Memory Agent</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="consent-scope">Consent Scope</label>
                                    <select id="consent-scope" class="form-control">
                                        <option value="vault.read.email">Vault Read Email</option>
                                        <option value="vault.write.email">Vault Write Email</option>
                                        <option value="vault.read.file">Vault Read File</option>
                                        <option value="vault.write.file">Vault Write File</option>
                                        <option value="custom.temporary">Custom Temporary</option>
                                        <option value="custom.email.send">Custom Email Send</option>
                                    </select>
                                </div>

                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-key"></i> Generate Token
                                </button>
                            </form>
                        </div>

                        <div id="tokens-list" class="tokens-container">
                            <h2>Active Tokens</h2>
                            <div id="tokens-grid" class="tokens-grid">
                                <!-- Tokens will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-content">
                <div class="spinner"></div>
                <p>Processing your request...</p>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toast-container" class="toast-container">
            <!-- Toasts will be inserted here -->
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
