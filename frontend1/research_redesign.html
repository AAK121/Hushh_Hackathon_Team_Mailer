<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Agent - Paper Analysis Tool</title>
    <link rel="stylesheet" href="research_redesign.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header with Search and Paper Selection -->
        <header class="app-header">
            <div class="header-content">
                <h1><i class="fas fa-microscope"></i> Research Agent</h1>
                <div class="search-controls">
                    <div class="search-box">
                        <input 
                            type="text" 
                            id="searchInput" 
                            placeholder="Search academic papers..."
                            autocomplete="off"
                        >
                        <button id="searchBtn" class="search-btn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="paper-selector">
                        <select id="paperDropdown" class="paper-dropdown" disabled>
                            <option value="">Select a paper...</option>
                        </select>
                        <button id="analyzeBtn" class="analyze-btn" disabled>
                            <i class="fas fa-brain"></i> Analyze Paper
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="panel-container">
                <!-- Left Panel: Paper Display -->
                <section class="left-panel paper-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-file-pdf"></i> Paper Viewer</h2>
                        <div class="paper-controls">
                            <button id="downloadBtn" class="control-btn" disabled>
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                            <button id="summaryBtn" class="control-btn" disabled>
                                <i class="fas fa-magic"></i> Generate Summary
                            </button>
                            <div class="view-toggle">
                                <button id="abstractViewBtn" class="toggle-btn active">Abstract</button>
                                <button id="fullViewBtn" class="toggle-btn">Full Text</button>
                                <button id="pdfViewBtn" class="toggle-btn">PDF View</button>
                            </div>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div id="paperViewer" class="paper-viewer">
                            <div class="empty-state">
                                <i class="fas fa-file-pdf fa-3x"></i>
                                <h3>No Paper Selected</h3>
                                <p>Search for papers and select one from the dropdown to view it here</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Resizable Divider -->
                <div class="panel-divider" id="panelDivider"></div>

                <!-- Right Panel: AI Agent & Notes -->
                <section class="right-panel agent-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-robot"></i> AI Research Assistant</h2>
                        <div class="agent-controls">
                            <div class="notes-selector">
                                <select id="notesDropdown" class="notes-dropdown">
                                    <option value="current">Current Session</option>
                                </select>
                                <button id="newNotesBtn" class="control-btn">
                                    <i class="fas fa-plus"></i> New Notes
                                </button>
                                <button id="saveNotesBtn" class="control-btn">
                                    <i class="fas fa-save"></i> Save
                                </button>
                                <button id="analysisMenuBtn" class="control-btn analysis-menu-btn">
                                    <i class="fas fa-brain"></i> Analysis Menu
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="panel-content">
                        <!-- Chat Interface -->
                        <div class="chat-section">
                            <div id="chatMessages" class="chat-messages">
                                <!-- Welcome state will be dynamically inserted here -->
                            </div>
                            <div class="chat-input-container">
                                <div class="chat-input">
                                    <textarea 
                                        id="chatInput" 
                                        placeholder="Ask me about the paper, request explanations, or ask for specific notes..."
                                        rows="1"
                                    ></textarea>
                                    <button id="sendChatBtn" class="send-btn">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                                <p class="chat-bottom-info">
                                    Research Agent may display inaccurate info about papers, so double-check its responses.
                                    <a href="#" onclick="return false;">Your privacy and Research Apps</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <span id="connectionStatus" class="status-item">
                    <i class="fas fa-circle connected"></i> Connected
                </span>
                <span id="paperStatus" class="status-item">
                    <i class="fas fa-file"></i> No paper selected
                </span>
            </div>
            <div class="status-right">
                <span id="notesStatus" class="status-item">
                    <i class="fas fa-sticky-note"></i> 0 notes
                </span>
                <span id="wordCount" class="status-item">
                    <i class="fas fa-font"></i> 0 words
                </span>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-content">
            <i class="fas fa-spinner fa-spin fa-2x"></i>
            <p id="loadingText">Loading...</p>
        </div>
    </div>

    <!-- Notes Modal -->
    <div id="notesModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-sticky-note"></i> Create New Notes File</h3>
                <button id="closeModalBtn" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <label for="notesName">Notes File Name:</label>
                <input type="text" id="notesName" placeholder="Enter notes file name...">
                <div class="modal-actions">
                    <button id="createNotesBtn" class="btn primary">Create</button>
                    <button id="cancelModalBtn" class="btn secondary">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Analysis Menu Modal -->
    <div id="analysisModal" class="modal hidden">
        <div class="modal-content analysis-modal">
            <div class="modal-header">
                <h3><i class="fas fa-brain"></i> Paper Analysis Menu</h3>
                <button id="closeAnalysisModalBtn" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="analysis-grid">
                    <button class="analysis-card" data-analysis="comprehensive">
                        <div class="analysis-icon">
                            <i class="fas fa-microscope"></i>
                        </div>
                        <h4>Comprehensive Analysis</h4>
                        <p>Complete structured analysis covering all aspects of the paper</p>
                    </button>
                    
                    <button class="analysis-card" data-analysis="section">
                        <div class="analysis-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h4>Section Analysis</h4>
                        <p>Select and analyze specific sections of the paper</p>
                    </button>
                    
                    <button class="analysis-card" data-analysis="notes">
                        <div class="analysis-icon">
                            <i class="fas fa-edit"></i>
                        </div>
                        <h4>Smart Note Taking</h4>
                        <p>Generate structured notes and summaries</p>
                    </button>
                    
                    <button class="analysis-card" data-analysis="compare">
                        <div class="analysis-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h4>Critical Evaluation</h4>
                        <p>Analyze strengths, weaknesses, and significance</p>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Section Selector Modal -->
    <div id="sectionModal" class="modal hidden">
        <div class="modal-content section-modal">
            <div class="modal-header">
                <h3><i class="fas fa-list"></i> Select Paper Section</h3>
                <button id="closeSectionModalBtn" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Choose a section of the paper to analyze in detail:</p>
                <div class="section-list">
                    <button class="section-item" data-section="abstract">
                        <i class="fas fa-file-text"></i>
                        <span>Abstract</span>
                    </button>
                    <button class="section-item" data-section="introduction">
                        <i class="fas fa-play"></i>
                        <span>Introduction</span>
                    </button>
                    <button class="section-item" data-section="methodology">
                        <i class="fas fa-cogs"></i>
                        <span>Methodology</span>
                    </button>
                    <button class="section-item" data-section="results">
                        <i class="fas fa-chart-bar"></i>
                        <span>Results</span>
                    </button>
                    <button class="section-item" data-section="discussion">
                        <i class="fas fa-comments"></i>
                        <span>Discussion</span>
                    </button>
                    <button class="section-item" data-section="conclusion">
                        <i class="fas fa-flag-checkered"></i>
                        <span>Conclusion</span>
                    </button>
                    <button class="section-item" data-section="custom">
                        <i class="fas fa-pencil-alt"></i>
                        <span>Custom Selection</span>
                    </button>
                </div>
                <div id="customSectionInput" class="custom-section-input hidden">
                    <label for="customSectionText">Paste or type the section text:</label>
                    <textarea id="customSectionText" placeholder="Paste the text you want to analyze..." rows="6"></textarea>
                    <button id="analyzeCustomBtn" class="btn primary">Analyze Custom Text</button>
                </div>
            </div>
        </div>
    </div>

    <script src="research_redesign.js"></script>
</body>
</html>
